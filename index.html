<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Jackie</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Jackie">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Jackie">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jackie">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  

</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
        </div>
      </nav>
    </div>
  </div>
</header>
    <section id="main" class="outer">
      <article id="post-滤波器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/02/滤波器/">滤波器</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2018/01/02/滤波器/" class="article-date">
  <time datetime="2018-01-02T10:38:00.000Z" itemprop="datePublished">2018-01-02</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-滤波器的概念"><a href="#1-滤波器的概念" class="headerlink" title="1.滤波器的概念"></a>1.滤波器的概念</h2><p>为了阐述滤波器的概念，我们首先来看两个场景。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201712310001.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201712310002.png" alt=""></p>
<p>在这两个场景中，为了排除不同频段信号（声音）的干扰，我们需要使用一种工具将不需要的频段滤除出去，这种工具就是滤波器。</p>
<h2 id="2-高通、低通和带通"><a href="#2-高通、低通和带通" class="headerlink" title="2.高通、低通和带通"></a>2.高通、低通和带通</h2><p>假定我们有三个不同频率的正弦信号，当他们相互叠加之后，如何将我们想要的信号分离出来呢？</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201712310003.png" alt=""></p>
<p>我们可以使用高通，低通和带通滤波器分别得到我们想要的部分。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201712310004.png" alt=""></p>
<h2 id="3-使用-Matlab-生成滤波器"><a href="#3-使用-Matlab-生成滤波器" class="headerlink" title="3.使用 Matlab 生成滤波器"></a>3.使用 Matlab 生成滤波器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">hd = design(fdesign.bandpass(&apos;N,F3dB1,F3dB2&apos;,6,7500,8500,fs),&apos;butter&apos;);</div><div class="line">res = filter(hd,data);</div></pre></td></tr></table></figure>
<p>其中，data 是输入被滤波的信号，res 是输出的结果。如果对 matlab 中滤波器感兴趣，可以输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; help fdesign.bandpass</div></pre></td></tr></table></figure>
<p>下面我们用 matlab 生成的滤波器进行滤波。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201712310005.png" alt=""></p>
<p>滤波的结果如下：</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201712310006.png" alt=""></p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DSP/">DSP</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-傅里叶变换" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/26/傅里叶变换/">傅里叶变换</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/12/26/傅里叶变换/" class="article-date">
  <time datetime="2017-12-26T10:38:00.000Z" itemprop="datePublished">2017-12-26</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>本文是 <a href="http://blog.csdn.net/u012361418/article/details/46277779" target="_blank" rel="external">如果看了此文你还不懂傅里叶变换，那就过来掐死我吧</a> 的精华版。目的就是要让你在不看任何数学公式的情况下理解傅里叶分析。如果有兴趣且有耐心的话可以点击阅览原文。</p>
<p>首先 <strong>cite</strong> 一下原作者：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">作 者：韩 昊</div><div class="line">知 乎：Heinrich</div><div class="line">微 博：@花生油工人</div><div class="line">知乎专栏：与时间无关的故事</div><div class="line">谨以此文献给大连海事大学的吴楠老师，柳晓鸣老师，王新年老师以及张晶泊老师。</div><div class="line">转载的同学请保留上面这句话，谢谢。如果还能保留文章来源就更感激不尽了。</div></pre></td></tr></table></figure>
<p>任何一种波形，都可以看作若干幅度、相位、频率不同的正弦波的叠加。我们首先用方波举个例子：</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201712300002.png" alt=""></p>
<p>如果我们把叠加方波所需的若干个正弦波展开，会得到如下所示的图像。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201712300003.png" alt=""></p>
<p>我们从时间方向去观察这个波形，就会得到信号的时域图像（也就是方波）。如果我们从频率方向去观察这个信号，就会得到信号的频域图像。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201712300004.png" alt=""></p>
<p>不过，上图的表示其实并不全面。每个频率的信号对应的信息不仅有强度，而且还有相位。从下图来看，如果箭头所指向的信号的相位发生了变化（即向左或向右移动），那么叠加合成的波形也将发生变化。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201712300005.png" alt=""></p>
<p>所以，傅里叶变换的结果是一个复数的数组，其中每一个复数代表某一频率上信号的强度和相位的信息。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201712300007.png" alt=""></p>
<p>复数的模长表示强度，复数的角度表示相位。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201712300006.png" alt=""></p>
<p>信号的时域表示和频域表示是等价的，得到其中一个就可以得到另一个。如果有时域信号，可以使用傅里叶变换得到频域信号。如果有频域信号，则可以使用逆傅里叶变换得到时域信号。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201712300008.png" alt=""></p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DSP/">DSP</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-TarsosDSP简介" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/25/TarsosDSP简介/">TarsosDSP 简介</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/12/25/TarsosDSP简介/" class="article-date">
  <time datetime="2017-12-25T10:38:00.000Z" itemprop="datePublished">2017-12-25</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-什么是-TarsosDSP？"><a href="#1-什么是-TarsosDSP？" class="headerlink" title="1.什么是 TarsosDSP？"></a>1.什么是 TarsosDSP？</h2><ul>
<li><strong>TarsosDSP</strong> 是一个用于音频处理的Java库。</li>
</ul>
<ul>
<li><p>它的目标是提供一个易于使用的界面，以便在纯Java中尽可能简单地实现实用的音频处理算法，而无需任何其他外部依赖。</p>
</li>
<li><p>这个库试图在能够完成任务，但足够简洁。</p>
</li>
<li><strong>TarsosDSP</strong> 的特点是实现了一个冲击起始检测器和一些间距检测算法：YIN，Mcleod Pitch方法和一个“动态小波算法间距跟踪”算法。</li>
</ul>
<ul>
<li>它还实现了Goertzel DTMF解码算法，时间拉伸算法（WSOLA），重采样，滤波器，简单合成，一些音频效果和变调算法。</li>
</ul>
<h2 id="2-TarsosDSP-都能实现哪些功能？"><a href="#2-TarsosDSP-都能实现哪些功能？" class="headerlink" title="2.TarsosDSP 都能实现哪些功能？"></a>2.TarsosDSP 都能实现哪些功能？</h2><ul>
<li><p>声音检测器：显示如何响度计算可以完成。当输入声音超过限定的事件被触发。</p>
</li>
<li><p>音高检测器：这个演示应用程序显示实时音高检测。当检测到音调时，赫兹值以概率一起打印。</p>
</li>
<li><p>敲击检测器：显示敲击的检测。拍手会导致一个敲击事件。这个演示应用程序还显示了这两个参数对算法的影响。</p>
</li>
<li><p>UtterAsterisk：是一个唱与目标尽可能接近旋律的游戏。从技术上讲，它使用YIN或MPM实时检测音高。</p>
</li>
<li><p>Goertzel DTMF（双音多频）：解码Goertzel算法的实现。</p>
</li>
<li>音频时间拉伸 ： 在纯 Java 中实现使用WSOLA实现一个时间拉伸算法。 WSOLA可以在不改变音高的情况下改变音频的播放速度。播放速度可以随时改变，即使有音频正在播放。</li>
<li>音频特征提取：一个命令行应用程序来做简单的特征提取。</li>
<li>音频合成：一个命令行应用程序来做简单的音频合成。</li>
<li>音高移动：一个示例应用程序，无论是实时麦克风输入还是录制的音频，都可以进行音高移位。还包括一个命令行应用程序来做音高转换。</li>
</ul>
<h1 id="3-TarsosDSP-是如何工作的？"><a href="#3-TarsosDSP-是如何工作的？" class="headerlink" title="3.TarsosDSP 是如何工作的？"></a>3.TarsosDSP 是如何工作的？</h1><p><img src="./images/201712300001.png" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">AudioDispatcher dispatcher = AudioDispatcherFactory.fromDefaultMicrophone(<span class="number">22050</span>,<span class="number">1024</span>,<span class="number">0</span>);</div><div class="line"></div><div class="line">PitchDetectionHandler pdh = <span class="keyword">new</span> PitchDetectionHandler() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handlePitch</span><span class="params">(PitchDetectionResult result,AudioEvent e)</span> </span>&#123;</div><div class="line">                <span class="keyword">final</span> <span class="keyword">float</span> pitchInHz = result.getPitch();</div><div class="line">                runOnUiThread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                        TextView text = (TextView) findViewById(R.id.textView1);</div><div class="line">                        text.setText(<span class="string">""</span> + pitchInHz);</div><div class="line">                    &#125;</div><div class="line">                &#125;);                        </div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line">AudioProcessor p = <span class="keyword">new</span> PitchProcessor(PitchEstimationAlgorithm.FFT_YIN, <span class="number">22050</span>, <span class="number">1024</span>, pdh);</div><div class="line">dispatcher.addAudioProcessor(p);</div><div class="line"><span class="keyword">new</span> Thread(dispatcher,<span class="string">"Audio Dispatcher"</span>).start();</div></pre></td></tr></table></figure>
<h2 id="4-如何获取和使用-TarsosDSP"><a href="#4-如何获取和使用-TarsosDSP" class="headerlink" title="4.如何获取和使用 TarsosDSP"></a>4.如何获取和使用 TarsosDSP</h2><p><a href="https://0110.be/posts/TarsosDSP_on_Android_-_Audio_Processing_in_Java_on_Android" target="_blank" rel="external">点击此链接跳转至官方网站</a></p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-声音信号的播放与录制" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/01/声音信号的播放与录制/">声音信号的播放与录制</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/12/01/声音信号的播放与录制/" class="article-date">
  <time datetime="2017-12-01T10:38:00.000Z" itemprop="datePublished">2017-12-01</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>在 Andriod 系统下，一般使用 AudioTrack 和 AudioRecord 来实现声音的播放与录制。</p>
<h2 id="1-声音信号的播放"><a href="#1-声音信号的播放" class="headerlink" title="1.声音信号的播放"></a>1.声音信号的播放</h2><p>播放声音一般用 AudioTrack 实现，示例代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> android.media.AudioFormat;</div><div class="line"><span class="keyword">import</span> android.media.AudioManager;</div><div class="line"><span class="keyword">import</span> android.media.AudioRecord;</div><div class="line"><span class="keyword">import</span> android.media.AudioTrack;</div><div class="line"><span class="keyword">import</span> android.media.MediaRecorder;</div><div class="line"><span class="keyword">import</span> android.os.Bundle;</div><div class="line"><span class="keyword">import</span> android.os.Environment;</div><div class="line"><span class="keyword">import</span> android.support.v4.app.ActivityCompat;</div><div class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</div><div class="line"><span class="keyword">import</span> android.util.Log;</div><div class="line"><span class="keyword">import</span> android.view.View;</div><div class="line"><span class="keyword">import</span> android.widget.Button;</div><div class="line"><span class="keyword">import</span> android.widget.ScrollView;</div><div class="line"><span class="keyword">import</span> android.widget.TextView;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">import</span> android.content.pm.PackageManager;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</div><div class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.DataInputStream;</div><div class="line"><span class="keyword">import</span> java.io.DataOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.InputStream;</div><div class="line"><span class="keyword">import</span> java.io.OutputStream;</div><div class="line"><span class="keyword">import</span> java.util.jar.Manifest;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span> , <span class="title">ActivityCompat</span>.<span class="title">OnRequestPermissionsResultCallback</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">//private static final int AUDIO_REQUEST = 0;</span></div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"PCMSample"</span>;</div><div class="line"></div><div class="line">    <span class="comment">//是否在录制</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isRecording = <span class="keyword">false</span>;</div><div class="line">    <span class="comment">//开始录音</span></div><div class="line">    <span class="keyword">private</span> Button startAudio;</div><div class="line">    <span class="comment">//结束录音</span></div><div class="line">    <span class="keyword">private</span> Button stopAudio;</div><div class="line">    <span class="comment">//播放录音</span></div><div class="line">    <span class="keyword">private</span> Button playAudio;</div><div class="line">    <span class="comment">//删除文件</span></div><div class="line">    <span class="keyword">private</span> Button deleteAudio;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> ScrollView mScrollView;</div><div class="line">    <span class="keyword">private</span> TextView tv_audio_succeess;</div><div class="line"></div><div class="line">    <span class="comment">//pcm文件</span></div><div class="line">    <span class="keyword">private</span> File file;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line"></div><div class="line">        initView();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//初始化View</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">        mScrollView = (ScrollView) findViewById(R.id.mScrollView);</div><div class="line">        tv_audio_succeess = (TextView) findViewById(R.id.tv_audio_succeess);</div><div class="line">        printLog(<span class="string">"初始化成功"</span>);</div><div class="line">        startAudio = (Button) findViewById(R.id.startAudio);</div><div class="line">        startAudio.setOnClickListener(<span class="keyword">this</span>);</div><div class="line">        stopAudio = (Button) findViewById(R.id.stopAudio);</div><div class="line">        stopAudio.setOnClickListener(<span class="keyword">this</span>);</div><div class="line">        playAudio = (Button) findViewById(R.id.playAudio);</div><div class="line">        playAudio.setOnClickListener(<span class="keyword">this</span>);</div><div class="line">        deleteAudio = (Button) findViewById(R.id.deleteAudio);</div><div class="line">        deleteAudio.setOnClickListener(<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//点击事件</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">        <span class="keyword">switch</span> (v.getId()) &#123;</div><div class="line">            <span class="keyword">case</span> R.id.startAudio:</div><div class="line">                <span class="comment">/*在此处插入运行时权限获取的代码*/</span></div><div class="line">                <span class="keyword">if</span> (ActivityCompat.checkSelfPermission(<span class="keyword">this</span>,</div><div class="line">                    android.Manifest.permission.RECORD_AUDIO) !=</div><div class="line">                    PackageManager.PERMISSION_GRANTED ||</div><div class="line">                    ActivityCompat.checkSelfPermission(<span class="keyword">this</span>,</div><div class="line">                    android.Manifest.permission.WRITE_EXTERNAL_STORAGE) !=</div><div class="line">                    PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line">                    ActivityCompat.requestPermissions(</div><div class="line">                            <span class="keyword">this</span>,</div><div class="line">                            <span class="keyword">new</span> String[]&#123;android.Manifest.permission.RECORD_AUDIO,</div><div class="line">                            android.Manifest.permission.WRITE_EXTERNAL_STORAGE&#125;, <span class="number">0</span>);</div><div class="line">                &#125;</div><div class="line">                Thread thread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                        StartRecord();</div><div class="line">                        Log.e(TAG,<span class="string">"start"</span>);</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">                thread.start();</div><div class="line">                printLog(<span class="string">"开始录音"</span>);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> R.id.stopAudio:</div><div class="line">                isRecording = <span class="keyword">false</span>;</div><div class="line">                printLog(<span class="string">"停止录音"</span>);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> R.id.playAudio:</div><div class="line"></div><div class="line">                PlayRecord();</div><div class="line">                ButtonEnabled(<span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div><div class="line">                printLog(<span class="string">"播放录音"</span>);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> R.id.deleteAudio:</div><div class="line">                deleFile();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//打印log</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">printLog</span><span class="params">(<span class="keyword">final</span> String resultString)</span> </span>&#123;</div><div class="line">        tv_audio_succeess.post(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                tv_audio_succeess.append(resultString + <span class="string">"\n"</span>);</div><div class="line">                mScrollView.fullScroll(ScrollView.FOCUS_DOWN);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//获取/失去焦点</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ButtonEnabled</span><span class="params">(<span class="keyword">boolean</span> start, <span class="keyword">boolean</span> stop, <span class="keyword">boolean</span> play)</span> </span>&#123;</div><div class="line">        startAudio.setEnabled(start);</div><div class="line">        stopAudio.setEnabled(stop);</div><div class="line">        playAudio.setEnabled(play);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//开始录音</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">StartRecord</span><span class="params">()</span> </span>&#123;</div><div class="line">        Log.i(TAG,<span class="string">"开始录音"</span>);</div><div class="line">        <span class="comment">//设置采样频率</span></div><div class="line">        <span class="keyword">int</span> frequency = <span class="number">48000</span>;</div><div class="line">        <span class="comment">//设置音频采样声道，CHANNEL_IN_STEREO代表双声道，CHANNEL_IN_MONO代表单声道</span></div><div class="line">        <span class="keyword">int</span> channelConfiguration = AudioFormat.CHANNEL_IN_STEREO;</div><div class="line">        <span class="comment">//设置音频数据格式，每个采样数据占16bit</span></div><div class="line">        <span class="keyword">int</span> audioEncoding = AudioFormat.ENCODING_PCM_16BIT;</div><div class="line">        <span class="comment">//生成PCM文件</span></div><div class="line">        file = <span class="keyword">new</span> File(Environment.getExternalStorageDirectory().getAbsolutePath()</div><div class="line">                + <span class="string">"/myaudio.pcm"</span>);</div><div class="line">        Log.i(TAG,<span class="string">"生成文件"</span>);</div><div class="line">        <span class="comment">//如果存在，就先删除再创建</span></div><div class="line">        <span class="keyword">if</span> (file.exists())</div><div class="line">            file.delete();</div><div class="line">            Log.i(TAG,<span class="string">"删除文件"</span>);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            file.createNewFile();</div><div class="line">            Log.i(TAG,<span class="string">"创建文件"</span>);</div><div class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">            Log.i(TAG,<span class="string">"未能创建"</span>);</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"未能创建"</span> + file.toString());</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            <span class="comment">//输出流</span></div><div class="line">            OutputStream os = <span class="keyword">new</span> FileOutputStream(file);</div><div class="line">            <span class="keyword">int</span> bufferSize = AudioRecord.getMinBufferSize(frequency,</div><div class="line">                    channelConfiguration, audioEncoding);</div><div class="line">            AudioRecord audioRecord = <span class="keyword">new</span> AudioRecord(MediaRecorder.AudioSource.MIC,</div><div class="line">                    frequency, channelConfiguration, audioEncoding, bufferSize);</div><div class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[bufferSize];</div><div class="line">            audioRecord.startRecording();</div><div class="line">            Log.i(TAG, <span class="string">"开始录音"</span>);</div><div class="line">            isRecording = <span class="keyword">true</span>;</div><div class="line">            <span class="keyword">while</span> (isRecording) &#123;</div><div class="line">                <span class="keyword">int</span> bufferReadResult = audioRecord.read(buffer, <span class="number">0</span>, bufferSize);</div><div class="line">                os.write(buffer);</div><div class="line">            &#125;</div><div class="line">            audioRecord.stop();</div><div class="line">            os.close();</div><div class="line">        &#125; <span class="keyword">catch</span> (Throwable t) &#123;</div><div class="line">            Log.e(TAG, <span class="string">"录音失败"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//播放文件</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PlayRecord</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(file == <span class="keyword">null</span>)&#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> musicLength = (<span class="keyword">int</span>) (file.length() / <span class="number">2</span>);</div><div class="line">        <span class="keyword">byte</span>[] music = <span class="keyword">new</span> <span class="keyword">byte</span>[musicLength];</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            InputStream is = <span class="keyword">new</span> FileInputStream(file);</div><div class="line">            <span class="comment">//设置播放参数</span></div><div class="line">            AudioTrack audioTrack = <span class="keyword">new</span> AudioTrack(AudioManager.STREAM_MUSIC,</div><div class="line">                    <span class="number">48000</span>, AudioFormat.CHANNEL_OUT_STEREO,</div><div class="line">                    AudioFormat.ENCODING_PCM_16BIT,</div><div class="line">                    musicLength * <span class="number">2</span>,</div><div class="line">                    AudioTrack.MODE_STREAM);</div><div class="line">            audioTrack.play();</div><div class="line">            <span class="comment">//从文件中读取并写入audioTrack</span></div><div class="line">            <span class="keyword">while</span>(is.read(music)!= -<span class="number">1</span>)</div><div class="line">            &#123;</div><div class="line">                audioTrack.write(music, <span class="number">0</span>, musicLength);</div><div class="line">            &#125;</div><div class="line">            is.close();</div><div class="line">            audioTrack.stop();</div><div class="line">        &#125; <span class="keyword">catch</span> (Throwable t) &#123;</div><div class="line">            Log.e(TAG, <span class="string">"播放失败"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//删除文件</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">deleFile</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(file == <span class="keyword">null</span>)&#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        file.delete();</div><div class="line">        printLog(<span class="string">"文件删除成功"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/*private short[] test_Noise(short[] buf, int nb_sample)</span></div><div class="line">    &#123;</div><div class="line">        int i = 0;</div><div class="line">        for (i = 0; i &lt; nb_sample; i++)</div><div class="line">        &#123;</div><div class="line">            buf[i] &gt;&gt;= 2;</div><div class="line">        &#125;</div><div class="line">        return buf;</div><div class="line">    &#125;*/</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="2-声音信号的录制"><a href="#2-声音信号的录制" class="headerlink" title="2.声音信号的录制"></a>2.声音信号的录制</h2><p>播放声音一般用 AudioRecord 来实现，实例代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.Javen;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"></div><div class="line"><span class="keyword">import</span> android.app.Activity;</div><div class="line"><span class="keyword">import</span> android.media.AudioFormat;</div><div class="line"><span class="keyword">import</span> android.media.AudioRecord;</div><div class="line"><span class="keyword">import</span> android.media.MediaPlayer;</div><div class="line"><span class="keyword">import</span> android.media.MediaPlayer.OnPreparedListener;</div><div class="line"><span class="keyword">import</span> android.media.MediaRecorder;</div><div class="line"><span class="keyword">import</span> android.os.Bundle;</div><div class="line"><span class="keyword">import</span> android.text.format.Time;</div><div class="line"><span class="keyword">import</span> android.util.Log;</div><div class="line"><span class="keyword">import</span> android.view.View;</div><div class="line"><span class="keyword">import</span> android.view.View.OnClickListener;</div><div class="line"><span class="keyword">import</span> android.widget.Button;</div><div class="line"><span class="keyword">import</span> com.Javen44100.R;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AudioRecordActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"AudioRecordActivity"</span>;</div><div class="line">	<span class="keyword">private</span> Button startButton, stopButton, playButton;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> bufferSizeInBytes = <span class="number">0</span>;<span class="comment">//缓冲区大小</span></div><div class="line">	<span class="comment">//音频获取来源</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> audioSource = MediaRecorder.AudioSource.MIC;</div><div class="line">	<span class="comment">//设置音频的采样率，44100是目前的标准，但是某些设备仍然支持22050,16000,11025</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> sampleRateInHz = <span class="number">44100</span>;</div><div class="line">	<span class="comment">//设置音频的录制声道，CHANNEL_IN_STEREO为双声道，CHANNEL_CONFIGURATION_MONO为单声道 </span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> channelConfig = AudioFormat.CHANNEL_IN_STEREO;</div><div class="line">	<span class="comment">//设置音频数据格式:PCM 16位每个样本，保证设备支持。PCM 8位每个样本，不一定能得到设备的支持。</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> audioFormat = AudioFormat.ENCODING_PCM_16BIT;</div><div class="line">	<span class="comment">//AudioName裸音频数据文件  </span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String AudioName = <span class="string">"/sdcard/love.raw"</span>; </div><div class="line">    <span class="comment">//NewAudioName可播放的音频文件  </span></div><div class="line">    <span class="keyword">private</span> String NewAudioName = <span class="string">"/sdcard/new.wav"</span>; </div><div class="line">	</div><div class="line">	<span class="keyword">private</span> AudioRecord audioRecord;</div><div class="line">	</div><div class="line">	<span class="comment">//播放音频</span></div><div class="line">	<span class="keyword">private</span> MediaPlayer mediaPlayer;</div><div class="line">	</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> isRecord = <span class="keyword">false</span>;<span class="comment">//设置录制状态</span></div><div class="line">	</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.main);</div><div class="line">      <span class="comment">//获取当前时间  </span></div><div class="line">        Time time=<span class="keyword">new</span> Time();  </div><div class="line">        time.setToNow();  </div><div class="line">        String times= time.year+<span class="string">"."</span>+(time.month+<span class="number">1</span>)+<span class="string">"."</span>+time.monthDay+<span class="string">"_"</span>+time.hour+<span class="string">":"</span>+time.minute+<span class="string">":"</span>+time.second;</div><div class="line">        NewAudioName = <span class="string">"/sdcard/"</span>+times+<span class="string">".wav"</span>;</div><div class="line">        init();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">    	startButton = (Button)findViewById(R.id.startButton);</div><div class="line">    	stopButton = (Button)findViewById(R.id.stopButton);</div><div class="line">    	playButton = (Button)findViewById(R.id.playButton);</div><div class="line">    	</div><div class="line">    	creatAudioRecord();</div><div class="line">    	startButton.setOnClickListener(<span class="keyword">new</span> AudioRecordLinstener());</div><div class="line">    	stopButton.setOnClickListener(<span class="keyword">new</span> AudioRecordLinstener());</div><div class="line">    	playButton.setOnClickListener(<span class="keyword">new</span> AudioRecordLinstener());</div><div class="line">    	</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">creatAudioRecord</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">    	<span class="comment">//根据AudioRecord的音频采样率、音频录制声道、音频数据格式获取缓冲区大小</span></div><div class="line">    	bufferSizeInBytes = AudioRecord.getMinBufferSize(sampleRateInHz, channelConfig, audioFormat);</div><div class="line">    	Log.d(TAG, <span class="string">"creatAudioRecord--&gt;bufferSizeInBytes="</span>+bufferSizeInBytes);</div><div class="line">    	</div><div class="line">    	<span class="comment">//根据音频获取来源、音频采用率、音频录制声道、音频数据格式和缓冲区大小来创建AudioRecord对象</span></div><div class="line">    	audioRecord = <span class="keyword">new</span> AudioRecord(audioSource, sampleRateInHz, channelConfig, audioFormat, bufferSizeInBytes);</div><div class="line">    	</div><div class="line">    	<span class="comment">//创建播放实例</span></div><div class="line">    	mediaPlayer = <span class="keyword">new</span> MediaPlayer();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">AudioRecordLinstener</span> <span class="keyword">implements</span> <span class="title">OnClickListener</span></span></div><div class="line">    &#123;</div><div class="line">		<span class="meta">@Override</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span></span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span>(v == startButton)</div><div class="line">			&#123;</div><div class="line">				startAudioRecord();</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span>(v == stopButton)</div><div class="line">			&#123;</div><div class="line">				stopAudioRecord();</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span>(v == playButton)</div><div class="line">			&#123;</div><div class="line">				playMusic();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">PrepareListener</span> <span class="keyword">implements</span> <span class="title">OnPreparedListener</span></span></div><div class="line">    &#123;</div><div class="line"></div><div class="line">		<span class="meta">@Override</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPrepared</span><span class="params">(MediaPlayer mp)</span></span></div><div class="line">		&#123;</div><div class="line">			<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">			mediaPlayer.start();<span class="comment">//开始播放 </span></div><div class="line">		&#125;</div><div class="line">    	</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 播放录制的音频</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">playMusic</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">    	</div><div class="line">    	File file = <span class="keyword">new</span> File(NewAudioName);</div><div class="line">    	<span class="keyword">if</span>(file.exists())</div><div class="line">    	&#123;</div><div class="line">    	 	<span class="keyword">try</span></div><div class="line">    		&#123;</div><div class="line">        		mediaPlayer.reset();</div><div class="line">    			mediaPlayer.setDataSource(NewAudioName);</div><div class="line">    			mediaPlayer.prepare();<span class="comment">//进行数据缓冲</span></div><div class="line">    			</div><div class="line">    			mediaPlayer.setOnPreparedListener(<span class="keyword">new</span> PrepareListener()); </div><div class="line">    		&#125; <span class="keyword">catch</span> (IllegalArgumentException e)</div><div class="line">    		&#123;</div><div class="line">    			<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">    			e.printStackTrace();</div><div class="line">    		&#125; <span class="keyword">catch</span> (SecurityException e)</div><div class="line">    		&#123;</div><div class="line">    			<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">    			e.printStackTrace();</div><div class="line">    		&#125; <span class="keyword">catch</span> (IllegalStateException e)</div><div class="line">    		&#123;</div><div class="line">    			<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">    			e.printStackTrace();</div><div class="line">    		&#125; <span class="keyword">catch</span> (IOException e)</div><div class="line">    		&#123;</div><div class="line">    			<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">    			e.printStackTrace();</div><div class="line">    		&#125;</div><div class="line">    	&#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 开始录制音频</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">startAudioRecord</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">    	audioRecord.startRecording();<span class="comment">//开始录制</span></div><div class="line">    	isRecord = <span class="keyword">true</span>;</div><div class="line">    	<span class="keyword">new</span> AudioRecordThread().start();<span class="comment">//开启线程来把录制的音频数据保留下来</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 停止录制音频</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span>  <span class="title">stopAudioRecord</span><span class="params">()</span></span></div><div class="line">	&#123;</div><div class="line">    	close();  </div><div class="line">	&#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> </span></div><div class="line">    &#123;  </div><div class="line">        <span class="keyword">if</span> (audioRecord != <span class="keyword">null</span>) </div><div class="line">        &#123;  </div><div class="line">            System.out.println(<span class="string">"stopRecord"</span>);  </div><div class="line">            isRecord = <span class="keyword">false</span>;<span class="comment">//停止文件写入  </span></div><div class="line">            audioRecord.stop();  </div><div class="line">            audioRecord.release();<span class="comment">//释放资源  </span></div><div class="line">            audioRecord = <span class="keyword">null</span>;  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 音频数据写入线程</div><div class="line">     * <span class="doctag">@author</span> Administrator</div><div class="line">     *</div><div class="line">     */</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">AudioRecordThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></div><div class="line">    &#123;</div><div class="line">    	<span class="meta">@Override</span></div><div class="line">    	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line">    	&#123;</div><div class="line">    		<span class="keyword">super</span>.run();</div><div class="line">    		writeDataToFile();<span class="comment">//把录制的音频裸数据写入到文件中去</span></div><div class="line">    		copyWaveFile(AudioName, NewAudioName);<span class="comment">//给裸数据加上头文件</span></div><div class="line">    	&#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/** </span></div><div class="line">     * 把录制的音频裸数据写入到文件中去</div><div class="line">     * 这里将数据写入文件，但是并不能播放，因为AudioRecord获得的音频是原始的裸音频， </div><div class="line">     * 如果需要播放就必须加入一些格式或者编码的头信息。但是这样的好处就是你可以对音频的 裸数据进行处理，比如你要做一个爱说话的TOM </div><div class="line">     * 猫在这里就进行音频的处理，然后重新封装 所以说这样得到的音频比较容易做一些音频的处理。 </div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeDataToFile</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">    	<span class="comment">// new一个byte数组用来存一些字节数据，大小为缓冲区大小 </span></div><div class="line">    	<span class="keyword">byte</span>[] audioData = <span class="keyword">new</span> <span class="keyword">byte</span>[bufferSizeInBytes];</div><div class="line">    	<span class="keyword">int</span> readSize = <span class="number">0</span>;</div><div class="line">    	FileOutputStream fos = <span class="keyword">null</span>;</div><div class="line">    	File file = <span class="keyword">new</span> File(AudioName);</div><div class="line">    	<span class="keyword">if</span>(file.exists())</div><div class="line">    		file.delete();</div><div class="line">    	<span class="keyword">try</span></div><div class="line">		&#123;</div><div class="line">			fos = <span class="keyword">new</span> FileOutputStream(file);<span class="comment">//获取一个文件的输出流</span></div><div class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e)</div><div class="line">		&#123;</div><div class="line">			<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">    	</div><div class="line">    	<span class="keyword">while</span>(isRecord == <span class="keyword">true</span>)</div><div class="line">    	&#123;</div><div class="line">    		readSize = audioRecord.read(audioData, <span class="number">0</span>, bufferSizeInBytes);</div><div class="line">    		Log.d(TAG, <span class="string">"readSize ="</span>+readSize);</div><div class="line">    		<span class="keyword">if</span>(AudioRecord.ERROR_INVALID_OPERATION != readSize)</div><div class="line">    		&#123;</div><div class="line">    			<span class="keyword">try</span></div><div class="line">				&#123;</div><div class="line">					fos.write(audioData);</div><div class="line">				&#125; <span class="keyword">catch</span> (IOException e)</div><div class="line">				&#123;</div><div class="line">					<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">					e.printStackTrace();</div><div class="line">				&#125;</div><div class="line">    		&#125;</div><div class="line">    	&#125;</div><div class="line">    	</div><div class="line">    	<span class="keyword">try</span></div><div class="line">		&#123;</div><div class="line">			fos.close();</div><div class="line">		&#125; <span class="keyword">catch</span> (IOException e)</div><div class="line">		&#123;</div><div class="line">			<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">copyWaveFile</span><span class="params">(String inFileName, String outFileName)</span></span></div><div class="line">    &#123;</div><div class="line">    	FileInputStream in = <span class="keyword">null</span>;</div><div class="line">    	FileOutputStream out = <span class="keyword">null</span>;</div><div class="line">    	<span class="keyword">long</span> totalAudioLen = <span class="number">0</span>;  </div><div class="line">        <span class="keyword">long</span> totalDataLen = totalAudioLen + <span class="number">36</span>;  </div><div class="line">        <span class="keyword">long</span> longSampleRate = sampleRateInHz;  </div><div class="line">        <span class="keyword">int</span> channels = <span class="number">2</span>;  </div><div class="line">        <span class="keyword">long</span> byteRate = <span class="number">16</span> * sampleRateInHz * channels / <span class="number">8</span>;</div><div class="line">        </div><div class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[bufferSizeInBytes];</div><div class="line">    	<span class="keyword">try</span></div><div class="line">		&#123;</div><div class="line">    		in = <span class="keyword">new</span> FileInputStream(inFileName);</div><div class="line">    		out = <span class="keyword">new</span> FileOutputStream(outFileName);</div><div class="line">			</div><div class="line">			totalAudioLen = in.getChannel().size();</div><div class="line">			totalDataLen = totalAudioLen + <span class="number">36</span>;  </div><div class="line">			WriteWaveFileHeader(out, totalAudioLen, totalDataLen, longSampleRate, channels, byteRate);  </div><div class="line">			<span class="keyword">while</span>(in.read(data) != -<span class="number">1</span>)</div><div class="line">			&#123;</div><div class="line">				out.write(data);</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			in.close();</div><div class="line">			out.close();</div><div class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e)</div><div class="line">		&#123;</div><div class="line">			<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; <span class="keyword">catch</span> (IOException e)</div><div class="line">		&#123;</div><div class="line">			<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/** </span></div><div class="line">     * 这里提供一个头信息。插入这些信息就可以得到可以播放的文件。 </div><div class="line">     * 音频的文件，可以发现前面的头文件可以说基本一样哦。每种格式的文件都有 </div><div class="line">     * 自己特有的头文件。 </div><div class="line">     */  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">WriteWaveFileHeader</span><span class="params">(FileOutputStream out, <span class="keyword">long</span> totalAudioLen,  </span></span></div><div class="line">            <span class="keyword">long</span> totalDataLen, <span class="keyword">long</span> longSampleRate, <span class="keyword">int</span> channels, <span class="keyword">long</span> byteRate)  </div><div class="line">            <span class="keyword">throws</span> IOException &#123;  </div><div class="line">        <span class="keyword">byte</span>[] header = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">44</span>];  </div><div class="line">        header[<span class="number">0</span>] = <span class="string">'R'</span>; <span class="comment">// RIFF/WAVE header  </span></div><div class="line">        header[<span class="number">1</span>] = <span class="string">'I'</span>;  </div><div class="line">        header[<span class="number">2</span>] = <span class="string">'F'</span>;  </div><div class="line">        header[<span class="number">3</span>] = <span class="string">'F'</span>;  </div><div class="line">        header[<span class="number">4</span>] = (<span class="keyword">byte</span>) (totalDataLen &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">5</span>] = (<span class="keyword">byte</span>) ((totalDataLen &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">6</span>] = (<span class="keyword">byte</span>) ((totalDataLen &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">7</span>] = (<span class="keyword">byte</span>) ((totalDataLen &gt;&gt; <span class="number">24</span>) &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">8</span>] = <span class="string">'W'</span>;  </div><div class="line">        header[<span class="number">9</span>] = <span class="string">'A'</span>;  </div><div class="line">        header[<span class="number">10</span>] = <span class="string">'V'</span>;  </div><div class="line">        header[<span class="number">11</span>] = <span class="string">'E'</span>;  </div><div class="line">        header[<span class="number">12</span>] = <span class="string">'f'</span>; <span class="comment">// 'fmt ' chunk  </span></div><div class="line">        header[<span class="number">13</span>] = <span class="string">'m'</span>;  </div><div class="line">        header[<span class="number">14</span>] = <span class="string">'t'</span>;  </div><div class="line">        header[<span class="number">15</span>] = <span class="string">' '</span>;  </div><div class="line">        header[<span class="number">16</span>] = <span class="number">16</span>; <span class="comment">// 4 bytes: size of 'fmt ' chunk  </span></div><div class="line">        header[<span class="number">17</span>] = <span class="number">0</span>;  </div><div class="line">        header[<span class="number">18</span>] = <span class="number">0</span>;  </div><div class="line">        header[<span class="number">19</span>] = <span class="number">0</span>;  </div><div class="line">        header[<span class="number">20</span>] = <span class="number">1</span>; <span class="comment">// format = 1  </span></div><div class="line">        header[<span class="number">21</span>] = <span class="number">0</span>;  </div><div class="line">        header[<span class="number">22</span>] = (<span class="keyword">byte</span>) channels;  </div><div class="line">        header[<span class="number">23</span>] = <span class="number">0</span>;  </div><div class="line">        header[<span class="number">24</span>] = (<span class="keyword">byte</span>) (longSampleRate &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">25</span>] = (<span class="keyword">byte</span>) ((longSampleRate &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">26</span>] = (<span class="keyword">byte</span>) ((longSampleRate &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">27</span>] = (<span class="keyword">byte</span>) ((longSampleRate &gt;&gt; <span class="number">24</span>) &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">28</span>] = (<span class="keyword">byte</span>) (byteRate &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">29</span>] = (<span class="keyword">byte</span>) ((byteRate &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">30</span>] = (<span class="keyword">byte</span>) ((byteRate &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">31</span>] = (<span class="keyword">byte</span>) ((byteRate &gt;&gt; <span class="number">24</span>) &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">32</span>] = (<span class="keyword">byte</span>) (<span class="number">2</span> * <span class="number">16</span> / <span class="number">8</span>); <span class="comment">// block align  </span></div><div class="line">        header[<span class="number">33</span>] = <span class="number">0</span>;  </div><div class="line">        header[<span class="number">34</span>] = <span class="number">16</span>; <span class="comment">// bits per sample  </span></div><div class="line">        header[<span class="number">35</span>] = <span class="number">0</span>;  </div><div class="line">        header[<span class="number">36</span>] = <span class="string">'d'</span>;  </div><div class="line">        header[<span class="number">37</span>] = <span class="string">'a'</span>;  </div><div class="line">        header[<span class="number">38</span>] = <span class="string">'t'</span>;  </div><div class="line">        header[<span class="number">39</span>] = <span class="string">'a'</span>;  </div><div class="line">        header[<span class="number">40</span>] = (<span class="keyword">byte</span>) (totalAudioLen &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">41</span>] = (<span class="keyword">byte</span>) ((totalAudioLen &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">42</span>] = (<span class="keyword">byte</span>) ((totalAudioLen &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0xff</span>);  </div><div class="line">        header[<span class="number">43</span>] = (<span class="keyword">byte</span>) ((totalAudioLen &gt;&gt; <span class="number">24</span>) &amp; <span class="number">0xff</span>);  </div><div class="line">        out.write(header, <span class="number">0</span>, <span class="number">44</span>);  </div><div class="line">    &#125;  </div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">    	close();</div><div class="line">    	<span class="keyword">if</span>(mediaPlayer != <span class="keyword">null</span>)</div><div class="line">    	&#123;</div><div class="line">    		mediaPlayer.release();  </div><div class="line">       	    mediaPlayer = <span class="keyword">null</span>;</div><div class="line">    	&#125;</div><div class="line">    	<span class="keyword">super</span>.onDestroy();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android，Audio/">Android，Audio</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-概率概念" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/29/概率概念/">概率概念</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/11/29/概率概念/" class="article-date">
  <time datetime="2017-11-29T08:57:55.000Z" itemprop="datePublished">2017-11-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/CFA/">CFA</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-互斥事件（Mutually-exclusive-events）和周全事件（Exhaustive-events）"><a href="#1-互斥事件（Mutually-exclusive-events）和周全事件（Exhaustive-events）" class="headerlink" title="1.互斥事件（Mutually exclusive events）和周全事件（Exhaustive events）"></a>1.互斥事件（Mutually exclusive events）和周全事件（Exhaustive events）</h2><ul>
<li><strong>互斥事件（Mutually exclusive events）</strong>指的是不可能同时发生的事件。</li>
<li><strong>周全事件（Exhaustive events）</strong>指的是覆盖了所有结果的时间集合。</li>
</ul>
<h2 id="2-先验概率（prior-probability）和后验概率（empirical-probability）"><a href="#2-先验概率（prior-probability）和后验概率（empirical-probability）" class="headerlink" title="2.先验概率（prior probability）和后验概率（empirical probability）"></a>2.先验概率（prior probability）和后验概率（empirical probability）</h2><ul>
<li><strong>先验概率（prior probability）</strong>指的是依靠推测和推理获得的概率，如抛硬币等。</li>
<li><strong>后验概率（empirical probability）</strong>指的是依靠分析过去的数据得到的概率。</li>
</ul>
<h2 id="3-协方差（Covariance）"><a href="#3-协方差（Covariance）" class="headerlink" title="3.协方差（Covariance）"></a>3.协方差（Covariance）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Cov(Ri,Rj) = E&#123;[Ri - E(Ri)] × [Rj - E(Rj)]&#125;</div></pre></td></tr></table></figure>
<p>值得一提的是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Cov(RA,RA) = Var(RA)</div></pre></td></tr></table></figure>
<h2 id="4-相关系数（correlation-coefficient）"><a href="#4-相关系数（correlation-coefficient）" class="headerlink" title="4.相关系数（correlation coefficient）"></a>4.相关系数（correlation coefficient）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Corr(Ri,Rj) = Cov(Ri,Rj) / [σ(Ri) × σ(Rj)]</div></pre></td></tr></table></figure>
<p>注意，相关系数有时也被写成：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ρ(Ri,Rj) = Corr(Ri,Rj)</div></pre></td></tr></table></figure>
<h2 id="5-投资组合的方差（Portfolio-variance）"><a href="#5-投资组合的方差（Portfolio-variance）" class="headerlink" title="5.投资组合的方差（Portfolio variance）"></a>5.投资组合的方差（Portfolio variance）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Var(Rp) = ∑∑ wi × wj × Cov(Ri,Rj)</div></pre></td></tr></table></figure>
<h2 id="6-贝叶斯方程（Bayes‘-formula）"><a href="#6-贝叶斯方程（Bayes‘-formula）" class="headerlink" title="6.贝叶斯方程（Bayes‘ formula）"></a>6.贝叶斯方程（Bayes‘ formula）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">P（Bi|A） = [P(Bi) × P(A|Bi)] / [ ∑ P(Bj) × P(A|Bj)]</div></pre></td></tr></table></figure>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/零基础入门学习CFA/">零基础入门学习CFA</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-国内crm系统调研小结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/21/国内crm系统调研小结/">国内 CRM 系统调研小结</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/11/21/国内crm系统调研小结/" class="article-date">
  <time datetime="2017-11-21T10:11:39.000Z" itemprop="datePublished">2017-11-21</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/产品/">产品</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-界面设计"><a href="#1-界面设计" class="headerlink" title="1.界面设计"></a>1.界面设计</h2><h3 id="1-1-Salesforce"><a href="#1-1-Salesforce" class="headerlink" title="1.1.Salesforce"></a>1.1.Salesforce</h3><p>如果让我给我使用过的所有 CRM 软件的界面做个排名，SalesForce 的界面是稳稳能占据前两名的。它的界面看上去给人的感觉就是两个字：<strong>专业</strong>。</p>
<h4 id="1-1-1-主页"><a href="#1-1-1-主页" class="headerlink" title="1.1.1.主页"></a>1.1.1.主页</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/Saleforce-主页.jpg" alt=""></p>
<h4 id="1-1-2-客户列表"><a href="#1-1-2-客户列表" class="headerlink" title="1.1.2.客户列表"></a>1.1.2.客户列表</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/Saleforce-客户.jpg" alt=""></p>
<h4 id="1-1-3-新建客户"><a href="#1-1-3-新建客户" class="headerlink" title="1.1.3.新建客户"></a>1.1.3.新建客户</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/Saleforce-新建客户.jpg" alt=""></p>
<h4 id="1-1-4-新建任务"><a href="#1-1-4-新建任务" class="headerlink" title="1.1.4.新建任务"></a>1.1.4.新建任务</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/Saleforce-新建任务.jpg" alt=""></p>
<h3 id="1-2-爱客"><a href="#1-2-爱客" class="headerlink" title="1.2.爱客"></a>1.2.爱客</h3><p>爱客的整体画风也比较简洁，虽然看上去像是套用了某个前端的模板，但总的来说还是比较专业的。</p>
<h4 id="1-2-1-工作台"><a href="#1-2-1-工作台" class="headerlink" title="1.2.1.工作台"></a>1.2.1.工作台</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/爱客-工作台.jpg" alt=""></p>
<h4 id="1-2-2-客户列表"><a href="#1-2-2-客户列表" class="headerlink" title="1.2.2.客户列表"></a>1.2.2.客户列表</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/爱客-客户.jpg" alt=""></p>
<h4 id="1-2-3-客户详情"><a href="#1-2-3-客户详情" class="headerlink" title="1.2.3.客户详情"></a>1.2.3.客户详情</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/爱客-客户详情.jpg" alt=""></p>
<h4 id="1-2-4-新增客户"><a href="#1-2-4-新增客户" class="headerlink" title="1.2.4.新增客户"></a>1.2.4.新增客户</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/爱客-新增客户.jpg" alt=""></p>
<h4 id="1-2-5-跟进"><a href="#1-2-5-跟进" class="headerlink" title="1.2.5.跟进"></a>1.2.5.跟进</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/爱客-跟进.jpg" alt=""></p>
<h4 id="1-2-6-写跟进"><a href="#1-2-6-写跟进" class="headerlink" title="1.2.6.写跟进"></a>1.2.6.写跟进</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/爱客-写跟进.jpg" alt=""></p>
<h3 id="1-3-Xtools"><a href="#1-3-Xtools" class="headerlink" title="1.3.Xtools"></a>1.3.Xtools</h3><p>如果说谁能在前端界面上能够跟 Salesforce 媲美的话，那一定就是 Xtools。Xtools 的界面在细节的处理上特别完善，使用起来也很流畅。</p>
<h4 id="1-3-1-工作台"><a href="#1-3-1-工作台" class="headerlink" title="1.3.1.工作台"></a>1.3.1.工作台</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/Xtools-主页.jpg" alt=""></p>
<h4 id="1-3-2-客户列表"><a href="#1-3-2-客户列表" class="headerlink" title="1.3.2.客户列表"></a>1.3.2.客户列表</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/Xtools-客户.jpg" alt=""></p>
<h4 id="1-3-3-客户详情"><a href="#1-3-3-客户详情" class="headerlink" title="1.3.3.客户详情"></a>1.3.3.客户详情</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/Xtools-客户详情.jpg" alt=""></p>
<h4 id="1-3-4-新建客户"><a href="#1-3-4-新建客户" class="headerlink" title="1.3.4.新建客户"></a>1.3.4.新建客户</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/Xtools-新建客户.jpg" alt=""></p>
<h3 id="1-4-悟空"><a href="#1-4-悟空" class="headerlink" title="1.4.悟空"></a>1.4.悟空</h3><p>悟空的使用感受给人的印象就是：流畅。无论是开通试用的过程还是软件的使用过程，流畅到让你觉得你可能落入了一个精心设计的陷阱。开玩笑地说，真是如丝般顺滑（笑）。</p>
<h4 id="1-4-1-主页"><a href="#1-4-1-主页" class="headerlink" title="1.4.1.主页"></a>1.4.1.主页</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/悟空-主页.jpg" alt=""></p>
<h4 id="1-4-2-客户列表"><a href="#1-4-2-客户列表" class="headerlink" title="1.4.2.客户列表"></a>1.4.2.客户列表</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/悟空-客户.jpg" alt=""></p>
<h4 id="1-4-3-新建客户"><a href="#1-4-3-新建客户" class="headerlink" title="1.4.3.新建客户"></a>1.4.3.新建客户</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/悟空-新建客户.jpg" alt=""></p>
<h4 id="1-4-4-跟进"><a href="#1-4-4-跟进" class="headerlink" title="1.4.4.跟进"></a>1.4.4.跟进</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/悟空-跟进.jpg" alt=""></p>
<h3 id="1-5-亿客"><a href="#1-5-亿客" class="headerlink" title="1.5.亿客"></a>1.5.亿客</h3><p>亿客采用纯蓝色“复古”画风，看起来比它的竞争对手落后了一个时代。不过它的功能还是比较完善的。</p>
<h4 id="1-5-1-首页"><a href="#1-5-1-首页" class="headerlink" title="1.5.1.首页"></a>1.5.1.首页</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/亿客-首页.jpg" alt=""></p>
<h4 id="1-5-2-客户列表"><a href="#1-5-2-客户列表" class="headerlink" title="1.5.2.客户列表"></a>1.5.2.客户列表</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/亿客-客户.jpg" alt=""></p>
<h4 id="1-5-3-新建客户"><a href="#1-5-3-新建客户" class="headerlink" title="1.5.3.新建客户"></a>1.5.3.新建客户</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/亿客-新建客户.jpg" alt=""></p>
<h4 id="1-5-4-记录"><a href="#1-5-4-记录" class="headerlink" title="1.5.4.记录"></a>1.5.4.记录</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/亿客-记录.jpg" alt=""></p>
<h3 id="1-6-八百客"><a href="#1-6-八百客" class="headerlink" title="1.6.八百客"></a>1.6.八百客</h3><p>八百客的界面风格实在是太古老了，虽然它的功能也很完善，但是我们这里就不详细描述了。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/八百客-原始界面设计.jpg" alt=""></p>
<h2 id="2-用户数量"><a href="#2-用户数量" class="headerlink" title="2.用户数量"></a>2.用户数量</h2><p>大多数网站没有公布自己的用户数量信息，不过我们可以通过流量来进行推测。由于网上的数据并不是很全面，这里我们只展示出我们能拿到的数据。</p>
<h4 id="2-1-分享销客-VS-爱客"><a href="#2-1-分享销客-VS-爱客" class="headerlink" title="2.1.分享销客 VS 爱客"></a>2.1.分享销客 VS 爱客</h4><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/分销客-爱客.jpg" alt=""></p>
<p>我们可以看到，分享销客的数量更多一点，但也只有 700 K / 月。我们做个大概的估计，假定每个用户平均三天上线一次（对于“活”的用户而言这已经是比较低的使用频率了），那么一个月就是 10 次。所以纷享销客的越活用户应该不会超过 70 万。如果按照每天上线一次来计算，那么它的用户数量大概在 10 万左右。</p>
<h3 id="2-2-泛微-VS-Salesforce"><a href="#2-2-泛微-VS-Salesforce" class="headerlink" title="2.2.泛微 VS Salesforce"></a>2.2.泛微 VS Salesforce</h3><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/fw-salesforce.jpg" alt=""></p>
<p>泛微的月流量大概是 500 K 左右，跟纷享销客大概是一个量级。不过 Salesforce 这也太多了吧？ 100 多M？仔细核对了一下，force.com 下面有很多个子域名，其中最有可能和 Salesforce 相关的是 ：lightning.force.com。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/salesforce真实.jpg" alt=""></p>
<p>即使是这样流量还是很多，不过与其他 CRM 不同，它的流量主要来自于北美。这似乎违背了我们调研国内 CRM 系统的初衷。不过我在使用  Salesforce 的时候，觉得它的汉化已经很完善了。而且 SEO（搜索引擎优化）也做到了百度的前列。所以在我看来算作国内市场的 CRM 软件应该也不过分吧。</p>
<h2 id="3-价格"><a href="#3-价格" class="headerlink" title="3.价格"></a>3.价格</h2><p>各家 CRM 软件的价格都差不多，可能因为 Salesforce 习惯了用美元的缘故，折算成人民币要贵一点。以下是各家的价格：</p>
<h3 id="3-1-Salesforce-价格"><a href="#3-1-Salesforce-价格" class="headerlink" title="3.1.Salesforce 价格"></a>3.1.Salesforce 价格</h3><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/salesforce价格.jpg" alt=""></p>
<h3 id="3-2-Xtools-价格"><a href="#3-2-Xtools-价格" class="headerlink" title="3.2.Xtools 价格"></a>3.2.Xtools 价格</h3><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/Xtools-价格.jpg" alt=""></p>
<h3 id="3-1-亿客价格"><a href="#3-1-亿客价格" class="headerlink" title="3.1.亿客价格"></a>3.1.亿客价格</h3><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/亿客-价格.jpg" alt=""></p>
<h2 id="4-总结"><a href="#4-总结" class="headerlink" title="4.总结"></a>4.总结</h2><p>从目前的 CRM 软件市场来看，显然已经是一片红海。市场上已经进化出了比较完备的产品，而且在国内的价格也在可接收的范围之内。如果想要在这一领域划分出一块领地，就必须有比较大的创新点。否则可能就是死路一条。</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CRM/">CRM</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-统计概念与市场回报" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/19/统计概念与市场回报/">统计概念与市场回报</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/11/19/统计概念与市场回报/" class="article-date">
  <time datetime="2017-11-19T08:57:55.000Z" itemprop="datePublished">2017-11-19</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/CFA/">CFA</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-描述统计（descriptive-statics）与推论统计（inferential-statistics）"><a href="#1-描述统计（descriptive-statics）与推论统计（inferential-statistics）" class="headerlink" title="1.描述统计（descriptive statics）与推论统计（inferential statistics）"></a>1.描述统计（descriptive statics）与推论统计（inferential statistics）</h2><p>描述统计（descriptive statics）指的是对总体（population）进行统计特征，而推论统计指的是基于一个样本（sample）来进行判断。</p>
<h2 id="2-测量尺度类型"><a href="#2-测量尺度类型" class="headerlink" title="2.测量尺度类型"></a>2.测量尺度类型</h2><ul>
<li>定类型数据（Nominal Scale）：如两种不同类型的基金。</li>
<li>定序型数据（Ordinal Scale）：如老年、中年、青年、幼年。</li>
<li>定距型数据（Interval Scale）：如温度。</li>
<li>定比型数据（Ratio Scale）：如货币。</li>
</ul>
<h2 id="3-总体均值（μ）和样本均值（X’）"><a href="#3-总体均值（μ）和样本均值（X’）" class="headerlink" title="3.总体均值（μ）和样本均值（X’）"></a>3.总体均值（μ）和样本均值（X’）</h2><p>总体均值是总体中所有观测值的平均值，记作μ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">μ = (X1 + X2 + ... + XN) / N</div></pre></td></tr></table></figure>
<p>其中，N 是总体中的观测值数量。</p>
<p>样本均值是样本中所有观测值的平均值，记作X‘（应该是 X 拔，即 X 上面有一道横线，打不出来所以用 X‘代替）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">X&apos; = (X1 + X2 + ... + Xn) / n</div></pre></td></tr></table></figure>
<p>其中，n 是样本中观测值的数量。</p>
<h2 id="4-直方图（Histogram）和折线图（Frequency-Polygon）"><a href="#4-直方图（Histogram）和折线图（Frequency-Polygon）" class="headerlink" title="4.直方图（Histogram）和折线图（Frequency Polygon）"></a>4.直方图（Histogram）和折线图（Frequency Polygon）</h2><h2 id="5-中位数（median）和众数（mode）"><a href="#5-中位数（median）和众数（mode）" class="headerlink" title="5.中位数（median）和众数（mode）"></a>5.中位数（median）和众数（mode）</h2><ul>
<li><strong>中位数（median）</strong>就是将数据集排序（升序或者降序）之后，最中间的样本的值。</li>
<li><strong>众数（mode）</strong>就是数据集中出现频次最高的值。如果只有一个众数，那么数据集为<strong>单峰（unimodal）</strong>的，如果是两个或者三个众数，那么称为<strong>双峰（bimodal）</strong>或者<strong>三峰（trimodal）</strong>的。</li>
</ul>
<h2 id="6-几何平均数（geometric-median）"><a href="#6-几何平均数（geometric-median）" class="headerlink" title="6.几何平均数（geometric median）"></a>6.几何平均数（geometric median）</h2><p><strong>几何平均数（geometric median）</strong>的计算有两种方式，一种是最基本的计算方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">G = (X1 × X2 × ... × Xn) ^ (1 / n)</div></pre></td></tr></table></figure>
<p>另一种计算方式是对<strong>回报数据集（returns data set）</strong>的几何平均数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1 + RG = [(1 + R1) × (1 + R2) × ... × (1 + R2)] ^ (1 / n)</div></pre></td></tr></table></figure>
<h2 id="7-调谐平均数（harmonic-mean）"><a href="#7-调谐平均数（harmonic-mean）" class="headerlink" title="7.调谐平均数（harmonic mean）"></a>7.调谐平均数（harmonic mean）</h2><p><strong>调谐平均数（harmonic mean）</strong>的计算方法为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">XH = N / [(1 / X1) + (1 / X2) + ...+ (1 / XN)]</div></pre></td></tr></table></figure>
<h2 id="8-分位数（Quantile）"><a href="#8-分位数（Quantile）" class="headerlink" title="8.分位数（Quantile）"></a>8.分位数（Quantile）</h2><p><strong>分位数（Quantile）</strong> 说的是比例所处或者低于该值的术语。</p>
<ul>
<li><strong>四分位数（Quartiles）</strong> 低于四分之一的数值。</li>
<li><strong>五分位数（Quintile）</strong>低于五分之一的数值。</li>
<li><strong>十分位数（Decile）</strong>低于十分之一的数值。</li>
<li><strong>百分位数（Percentile）</strong>低于百分之一的数值。</li>
</ul>
<p>以百分位数为例，假设给出的百分数为y，计算公式为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Ly = (n + 1) × y / 100</div></pre></td></tr></table></figure>
<p>其中，n 为样本总数。</p>
<h2 id="9-范围（range）"><a href="#9-范围（range）" class="headerlink" title="9.范围（range）"></a>9.范围（range）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">range = max value - min value</div></pre></td></tr></table></figure>
<h2 id="10-平均绝对偏差（MAD，mean-absolute-deviation）"><a href="#10-平均绝对偏差（MAD，mean-absolute-deviation）" class="headerlink" title="10.平均绝对偏差（MAD，mean absolute deviation）"></a>10.平均绝对偏差（MAD，mean absolute deviation）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">MAD = (|X1 - X&apos;| + |X2 - X&apos;| + ... + |Xn - X&apos;|) / n</div></pre></td></tr></table></figure>
<p>其中，X’ 表示样本均值。</p>
<h2 id="11-总体方差（population-variance）和总体标准差（population-standard-deviation）"><a href="#11-总体方差（population-variance）和总体标准差（population-standard-deviation）" class="headerlink" title="11.总体方差（population variance）和总体标准差（population standard deviation）"></a>11.总体方差（population variance）和总体标准差（population standard deviation）</h2><ul>
<li>总体方差（population variance）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">σ2 = [(X1 - μ) ^ 2 + (X2 - μ) ^ 2 + ... + (XN - μ) ^ 2 ] / N</div></pre></td></tr></table></figure>
<p>其中，μ 为总体均值， N 为总体数量。</p>
<ul>
<li>总体标准差（population standard deviation）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">σ = ｛[(X1 - μ) ^ 2 + (X2 - μ) ^ 2 + ... + (XN - μ) ^ 2 ] / N｝^ (1 / 2)</div></pre></td></tr></table></figure>
<h2 id="12-样本方差（sample-variance）和样本标准差（sample-standard-deviation）"><a href="#12-样本方差（sample-variance）和样本标准差（sample-standard-deviation）" class="headerlink" title="12.样本方差（sample variance）和样本标准差（sample standard deviation）"></a>12.样本方差（sample variance）和样本标准差（sample standard deviation）</h2><ul>
<li>样本方差（sample variance）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s2 = [(X1 - X&apos;) ^ 2 + (X2 - X&apos;) ^ 2 + ... + (XN - X&apos;) ^ 2] / (n - 1)</div></pre></td></tr></table></figure>
<p>其中，X’ 为样本均值，n 为样本数量。</p>
<ul>
<li>样本标准差（sample standard deviation）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s = &#123;[(X1 - X&apos;) ^ 2 + (X2 - X&apos;) ^ 2 + ... + (XN - X&apos;) ^ 2] / (n - 1)&#125; ^ (1 / 2)</div></pre></td></tr></table></figure>
<h2 id="13-切比雪夫不等式（Chebyshev’s-inequality）"><a href="#13-切比雪夫不等式（Chebyshev’s-inequality）" class="headerlink" title="13.切比雪夫不等式（Chebyshev’s inequality）"></a>13.切比雪夫不等式（Chebyshev’s inequality）</h2><p>切比雪夫不等式的内容为：无论样本分布如何，对于 k &gt; 1 的情况，距离均值 k 倍方差以内的样本占比至少为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1 - 1 / k ^2</div></pre></td></tr></table></figure>
<h2 id="14-变异系数（coefficient-of-variation）"><a href="#14-变异系数（coefficient-of-variation）" class="headerlink" title="14.变异系数（coefficient of variation）"></a>14.变异系数（coefficient of variation）</h2><p><strong>变异系数（coefficient of variation）</strong>是用来描述相对分布的情况的，其计算公式为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CV = s / X&apos;</div></pre></td></tr></table></figure>
<p>其中，s 为样本标准差，X’ 为样本均值。</p>
<h2 id="15-夏普比率（Sharpe-Ratio）"><a href="#15-夏普比率（Sharpe-Ratio）" class="headerlink" title="15.夏普比率（Sharpe Ratio）"></a>15.夏普比率（Sharpe Ratio）</h2><p><strong>夏普比率（Sharpe Ratio）</strong>是用来衡量基金绩效（即收益与风险关系）的一个指标。其计算公式为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Sharpe ratio = (rp - rf) / σ</div></pre></td></tr></table></figure>
<p>其中，rp 表示投资组合的回报，rf 表示无风险的投资的回报，σ 表示投资组合的标准差。</p>
<h2 id="16-偏度（Skewness）"><a href="#16-偏度（Skewness）" class="headerlink" title="16.偏度（Skewness）"></a>16.偏度（Skewness）</h2><p><strong>偏度（Skewness）</strong> 用来表示非对称分布的非对称的方向。</p>
<ul>
<li><p><strong>正偏（positively skewed）</strong>表示<strong>极端值（Outliers）</strong>存在于向上的区域，或者说分布在右侧有<strong>长尾（long tail）</strong>。这种情况下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">均值 &gt; 中值 &gt; 众数</div></pre></td></tr></table></figure>
</li>
<li><p><strong>正偏（negatively skewed）</strong>表示<strong>极端值（Outliers）</strong>存在于向下的区域，或者说分布在左侧有<strong>长尾（long tail）</strong>。这种情况下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">均值 &lt; 中值 &lt; 众数</div></pre></td></tr></table></figure>
</li>
</ul>
<p>偏度计算公式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sk = (1 / n) × [(X1 - X&apos;) ^ 3 + (X2 - X&apos;) ^ 3 + ... + (Xn - X&apos;) ^ 3] / (s ^ 3)</div></pre></td></tr></table></figure>
<p>其中，X’ 是样本均值，s 是样本标准差。</p>
<h2 id="17-峰度（kurtosis）"><a href="#17-峰度（kurtosis）" class="headerlink" title="17.峰度（kurtosis）"></a>17.峰度（kurtosis）</h2><p><strong>峰度（kurtosis）</strong>是用来表示一个分布是否比正态分布更“尖峰”的一侧参数。</p>
<ul>
<li><strong>尖峰态（leptokurtic）</strong>表示比正态分布更“尖峰”。</li>
<li><strong>低峰态（platykurtic）</strong>表示比正态分布更“平坦”。</li>
<li><strong>常峰态（mesokurtic）</strong>表示比正态分布一致。</li>
</ul>
<p>峰度计算公式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">k = (1 / n) × [(X1 - X&apos;) ^ 4 + (X2 - X&apos;) ^ 4 + ... + (Xn - X&apos;) ^ 4] / (s ^ 4)</div></pre></td></tr></table></figure>
<p>其中，X’是样本均值，s 是样本标准差。</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/零基础入门学习CFA/">零基础入门学习CFA</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-贴现现金流应用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/15/贴现现金流应用/">贴现现金流应用</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/11/15/贴现现金流应用/" class="article-date">
  <time datetime="2017-11-15T08:57:55.000Z" itemprop="datePublished">2017-11-15</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/CFA/">CFA</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-净现值（NPV）"><a href="#1-净现值（NPV）" class="headerlink" title="1.净现值（NPV）"></a>1.净现值（NPV）</h2><p>净现值（NPV）是考虑资金收支净额，以及按照一定的折现率折现之后的现值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NPV = CF1/[(1 + r)^1] + CF2/[(1 + r)^2] + ... + CFn/[(1 + r)^n]</div></pre></td></tr></table></figure>
<p>其中 CFi 是第 i 年的现金流，r 是折现率，n 是投资的时间。</p>
<h2 id="2-内回报率（IRR）"><a href="#2-内回报率（IRR）" class="headerlink" title="2.内回报率（IRR）"></a>2.内回报率（IRR）</h2><p>内部回报率（IRR），指项目投资实际可望达到的收益率。实质上，它是能使项目的净现值等于零时的折现率。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">0 = CF0 + CF1/[(1 + IRR)^1] + CF2/[(1 + IRR)^2] + ... + + CFn/[(1 + IRR)^n]</div></pre></td></tr></table></figure>
<p>其中 CFi 是第 i 年的现金流，r 是折现率，n 是投资的时间，IRR 是内回报率。</p>
<h2 id="3-接受和拒绝项目的标准"><a href="#3-接受和拒绝项目的标准" class="headerlink" title="3.接受和拒绝项目的标准"></a>3.接受和拒绝项目的标准</h2><ul>
<li><strong>对于独立（independent）项目，接受所有净现值（NPV）为正的项目。</strong>因为净现值为 0 意味着内回报率（IRR）等于投资者预期的回报率。<strong>所以这也意味着接收所有内回报率（IRR）大于预期回报率的项目。</strong></li>
</ul>
<ul>
<li><strong>对于互斥（mutually exclusive）项目，接受净现值（NPV）最高的项目。</strong></li>
</ul>
<h2 id="4-持有期汇报（Holding-Period-Return）"><a href="#4-持有期汇报（Holding-Period-Return）" class="headerlink" title="4.持有期汇报（Holding Period Return）"></a>4.持有期汇报（Holding Period Return）</h2><p>持有期汇报（HPR）等于利润（最终价值（ending value）与所有现金流（cash flow received）的总和与初始价值（beginning value）的差值）与初始价值的商。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">HPR = (ending value + cash flow received - beginning value) / beginning value</div></pre></td></tr></table></figure>
<p>如果没有现金流，则持有期回报（HPR）等于：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">HPR = (ending value - beginning value) / beginning value</div></pre></td></tr></table></figure>
<h3 id="5-价值加权回报率（money-weighted-return）与时间加权回报率（time-weighted-return）"><a href="#5-价值加权回报率（money-weighted-return）与时间加权回报率（time-weighted-return）" class="headerlink" title="5.价值加权回报率（money-weighted return）与时间加权回报率（time-weighted return）"></a>5.价值加权回报率（money-weighted return）与时间加权回报率（time-weighted return）</h3><ul>
<li><p>价值加权回报率（money-weighted return）相当于对投资组合（investment portfolio）的内回报率（IRR）。即当：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PV-inflows = PV-outflows</div></pre></td></tr></table></figure>
<p>时得到的内回报率（IRR）。</p>
</li>
</ul>
<ul>
<li><p>时间加权回报率（time-weighted return）相当于每个复利周期的回报率的几何平均值。即</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">time-weighted return = [(1 + HPR1) × (1 + HPR2) × ... × (1 + HPR2)] ^ (1/n)</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="6-银行折现收益率（bank-discount-yield）、持有期收益率（holding-period-yield）、实际年收益（effective-annual-yield）和货币市场收益率（money-market-yield）"><a href="#6-银行折现收益率（bank-discount-yield）、持有期收益率（holding-period-yield）、实际年收益（effective-annual-yield）和货币市场收益率（money-market-yield）" class="headerlink" title="6.银行折现收益率（bank discount yield）、持有期收益率（holding period yield）、实际年收益（effective annual yield）和货币市场收益率（money market yield）"></a>6.银行折现收益率（bank discount yield）、持有期收益率（holding period yield）、实际年收益（effective annual yield）和货币市场收益率（money market yield）</h2><ul>
<li><p>银行折现收益率（bank discount yield，r-BD）等于：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">r-BD = [(F - P) / F] × (360 / t)</div></pre></td></tr></table></figure>
<p>其中，F 为纸面价格（即期末支付价格），P 为买入价格，t 为持有时间，一年以 360 天计。</p>
</li>
<li><p>持有期收益率（holding period yield，HPY）等于：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">HPY = [(F - P) / P]</div></pre></td></tr></table></figure>
<p>其中，F 为纸面价格（即期末支付价格），P 为购买价格，t 为持有时间，一年以 360 天计。与银行折现收益率（BDY）相比，持有期收益率（HPY）的分母是买入价格（P），更接近我们平常对收益率的认知。</p>
</li>
<li><p>实际年收益率（effective annual yield，EAY）等于：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">EAY = (1 + HPY) ^ (365 / t) = [(F - P) / P] ^ (365 / t)</div></pre></td></tr></table></figure>
<p>实际年收益率使用了复利的形式，而且以 365 天为一年。</p>
</li>
<li><p>货币市场收益率（money market yield，CD equivalent yield，r-MM）等于：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">r-MM = HPY × (360 / t) = [(F - P) / P] × (360 / t)</div></pre></td></tr></table></figure>
<p>货币时长收益率使用了单利的形式，以 360 天为一年。</p>
</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th><strong>除以本金 / 纸面</strong></th>
<th><strong>单利 / 复利</strong></th>
<th><strong>一年 360 天 / 365 天</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>银行折现收益率</strong></td>
<td>纸面</td>
<td>单利</td>
<td>360</td>
</tr>
<tr>
<td><strong>货币市场收益率</strong></td>
<td>本金</td>
<td>单利</td>
<td>360</td>
</tr>
<tr>
<td><strong>持有期收益</strong></td>
<td>本金</td>
<td>–</td>
<td>–</td>
</tr>
<tr>
<td><strong>实际年收益</strong></td>
<td>本金</td>
<td>复利</td>
<td>365</td>
</tr>
</tbody>
</table>
<h3 id="7-债券等值收益率（bond-equivalent-yield，BEY）"><a href="#7-债券等值收益率（bond-equivalent-yield，BEY）" class="headerlink" title="7.债券等值收益率（bond equivalent yield，BEY）"></a><strong>7.债券等值收益率（bond equivalent yield，BEY）</strong></h3><p>债券等值收益率（bond equivalent yield，BEY）等于半年度收益率（半年度收益率按照复利计算）的两倍。</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NPV，IRR/">NPV，IRR</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/零基础入门学习CFA/">零基础入门学习CFA</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-货币的时间价值" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/13/货币的时间价值/">货币的时间价值</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/11/13/货币的时间价值/" class="article-date">
  <time datetime="2017-11-13T08:57:55.000Z" itemprop="datePublished">2017-11-13</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/CFA/">CFA</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-复利"><a href="#1-复利" class="headerlink" title="1.复利"></a>1.复利</h2><p>货币的时间价值是建立在复利（<strong>compound interest</strong>）的基础之上的。所谓复利，就是复利计算中利息按照约定的计息周期参与计息。也就是我们平常说的“利滚利”或者“驴打滚”。</p>
<p>举个例子，一个人欠了 100 元的债务，年利率 10 %。如果按照复利计算，那么如果一年以后还清，则需要归还 ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">100 × （100 % + 10 %） = 110 元。</div></pre></td></tr></table></figure>
<p>如果两年之后还清，则不仅需要支付当年本金产生的利息 ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">100 × 10 % = 10 元</div></pre></td></tr></table></figure>
<p>还要支付上一年利息所产生的利息:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">10 × 10 % = 1 元</div></pre></td></tr></table></figure>
<p>总共需要归还 :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">100（本金） + 10（第一年本金产生的利息） + 10 （第二年本金产生的利息）+ 1（第一年利息产生的利息）= 121 元。</div></pre></td></tr></table></figure>
<h2 id="2-金钱的现值（PV）和未来值（FV）"><a href="#2-金钱的现值（PV）和未来值（FV）" class="headerlink" title="2.金钱的现值（PV）和未来值（FV）"></a>2.金钱的现值（PV）和未来值（FV）</h2><p>一个人欠了 100 元的债务，年利率 10 %。两年之后需要归还 121 元。 100 元就是这笔债务的现值价值（PV）。两年之后需要归还的 121 元就是这笔债务的未来值（FV）。</p>
<h2 id="3-复利周期数（N）和每周期复利利率（I-Y）"><a href="#3-复利周期数（N）和每周期复利利率（I-Y）" class="headerlink" title="3.复利周期数（N）和每周期复利利率（I/Y）"></a>3.复利周期数（N）和每周期复利利率（I/Y）</h2><p>一个人欠了 100 元的债务，年利率 10 %，约定两年之后归还。这里的复利周期数（N）就是 2，每周期复利利率（I/Y）就是 10 %。</p>
<h2 id="4-每期现金流（PMT）"><a href="#4-每期现金流（PMT）" class="headerlink" title="4.每期现金流（PMT）"></a>4.每期现金流（PMT）</h2><p>一个人欠了 100 元的债务，年利率 10 %。如果这个人选择分期付款，每年归还 57.62 元。那么这个 57.62 元就是每期现金流（PMT）。</p>
<h2 id="5-货币的时间价值（TVM）"><a href="#5-货币的时间价值（TVM）" class="headerlink" title="5.货币的时间价值（TVM）"></a>5.货币的时间价值（TVM）</h2><p>理想情况下，如果利率恒定为正，那么货币的价值随着时间的前进而增加，随着时间的倒退而减少。金钱的现值（PV）和未来值（FV）存在着如下关系：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">FV = PV × (1 + I/Y) ^ N</div></pre></td></tr></table></figure>
<p>如果考虑每期现金流（PMT），则总的关系式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">FV = PV × (1 + I/Y) ^ N + PMT × &#123;[(1 - I/Y) ^ N] / (1 - I/Y)&#125;</div></pre></td></tr></table></figure>
<h2 id="6-风险类型"><a href="#6-风险类型" class="headerlink" title="6.风险类型"></a>6.风险类型</h2><ol>
<li>默认风险：借贷者不能按期支付现金流的风险。</li>
<li>流动性风险：为了使资产快速变现而贬值产生的风险。</li>
<li>到期风险：由借贷时间带来的风险。一般而言，长期借贷的风险更高。</li>
</ol>
<h2 id="7-有效年利率（EAR）"><a href="#7-有效年利率（EAR）" class="headerlink" title="7.有效年利率（EAR）"></a>7.有效年利率（EAR）</h2><p>一个人欠了 100 元的债务，年利率 10 %。但是复利周期不是按年结算，而是按半年结算。则每一年中有两个复利周期，每个周期利率 5 %。那么一年之后，这个人需要偿还：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">100 × （100 % + 5 %）×（100 % + 5 %） = 110.25 元。</div></pre></td></tr></table></figure>
<p>所以，这个人实际每年支付的利率其实是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">10.25 / 100 = 10.25 %</div></pre></td></tr></table></figure>
<p>这个 10.25 % 就是有效年利率（EAR）。假定年利率不变，则一年之内复利周期越多，那么有效年利率（EAR）就越高。</p>
<h2 id="8-普通年金（ordinary-annuity）与即付年金（annuity-due）"><a href="#8-普通年金（ordinary-annuity）与即付年金（annuity-due）" class="headerlink" title="8.普通年金（ordinary annuity）与即付年金（annuity due）"></a>8.普通年金（ordinary annuity）与即付年金（annuity due）</h2><p>年金（annuity）是在一定时间内的等间隔等值的持续现金流。一个人为了还清 年利率 10 % 的100 元的债务。两年中每年归还 57.62 元。那么他在这两年中每年归还的 57.62 元就是年金。</p>
<p>年金有两种结算方式，一种是普通年金（ordinary annuity），也就是每年年末支付。另一种是即付年金（annuity due），每年年初支付。普通年金每年的现金流（PMT）需要比即付年金多支付一年的利息。</p>
<h2 id="9-永续年金（Perpetuity）"><a href="#9-永续年金（Perpetuity）" class="headerlink" title="9.永续年金（Perpetuity）"></a>9.永续年金（Perpetuity）</h2><p>永续年金是是在无限时间内的等间隔等值的持续现金流。比如一个人买了一些股票，在理想情况下，这只股票将给他每年带来一定数额的收益，那么这支股票带来的收益就是永续年金（Perpetuity）。</p>
<p>永续年金的价值计算方式为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PV = PMT / (I/Y)</div></pre></td></tr></table></figure>
<h2 id="10-计算器的使用方式"><a href="#10-计算器的使用方式" class="headerlink" title="10.计算器的使用方式"></a>10.计算器的使用方式</h2><p>我们已经知道：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">FV = PV × (1 + I/Y) ^ N + PMT × &#123;[(1 - I/Y) ^ N] / (1 - I/Y)&#125;</div></pre></td></tr></table></figure>
<p>也就是说，PV、FV、I/Y、PMT、N 这五个参数组成了一个恒等式，只要知道其中的四个，就可以知道剩下的那个。下面举个例子通过计算器求 N：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">一个人欠了 100 元的债务，年利率 10 %。如果这个人选择分期付款，每年归还 57.62 元。请问几年还清？</div></pre></td></tr></table></figure>
<p>下面是输入的步骤：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">100 [PV]</div><div class="line">10 [I/Y]</div><div class="line">0 [FV]</div><div class="line">57.62 [+|-] [PMT]</div><div class="line">[CPT] [N]</div></pre></td></tr></table></figure>
<p>计算结果为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">N = 2.00</div></pre></td></tr></table></figure>
<h2 id="11-净现值（NPV）计算"><a href="#11-净现值（NPV）计算" class="headerlink" title="11.净现值（NPV）计算"></a>11.净现值（NPV）计算</h2><p>对于非恒定现金流（即每期的现金流的数量是不等的），可以采用净现值（NPV）计算，计算出该现金流折算成当前价值的数额：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">一个现金流的 PMT 为：-1000, 500, 0, 4000，3500, 2000，求净现值。</div></pre></td></tr></table></figure>
<p>则计算器输入的顺序为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[CF] [2nd] [CLR WORK]</div><div class="line">0 [ENTER]</div><div class="line">[↓] 1000 [+|-] [ENTER]</div><div class="line">[↓] [↓] 500 [+|-] [ENTER]</div><div class="line">[↓] [↓] 0  [ENTER]</div><div class="line">[↓] [↓] 4000 [ENTER]</div><div class="line">[↓] [↓] 3500 [ENTER]</div><div class="line">[↓] [↓] 2000 [ENTER]</div><div class="line">[NPV] 10 [ENTER]</div><div class="line">[↓] [CPT]</div></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NPV = 4711.91226</div></pre></td></tr></table></figure>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TVM/">TVM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/零基础入门学习CFA/">零基础入门学习CFA</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-AndroidStudio安装教程" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/24/AndroidStudio安装教程/">AndroidStudio安装教程</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/09/24/AndroidStudio安装教程/" class="article-date">
  <time datetime="2017-09-24T10:38:00.000Z" itemprop="datePublished">2017-09-24</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-下载-Android-Studio-安装包"><a href="#1-下载-Android-Studio-安装包" class="headerlink" title="1.下载 Android Studio 安装包"></a>1.下载 Android Studio 安装包</h2><p>下载地址：<a href="http://www.android-studio.org/" target="_blank" rel="external">http://www.android-studio.org/</a></p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240001.jpg" alt=""></p>
<h2 id="2-安装-Android-Studio"><a href="#2-安装-Android-Studio" class="headerlink" title="2.安装 Android Studio"></a>2.安装 Android Studio</h2><h3 id="2-1-打开安装程序"><a href="#2-1-打开安装程序" class="headerlink" title="2.1.打开安装程序"></a>2.1.打开安装程序</h3><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240002.jpg" alt=""></p>
<h3 id="2-2-选择安装内容"><a href="#2-2-选择安装内容" class="headerlink" title="2.2.选择安装内容"></a>2.2.选择安装内容</h3><p>进入到选择安装内容界面，除了 <strong>Android Studio</strong> 之外，我们还需要安装 <strong>Android SDK</strong> 和 <strong>Android Virtual Device</strong>。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240003.jpg" alt=""></p>
<h3 id="2-3-选择-Android-Studio-和-SDK-的安装位置"><a href="#2-3-选择-Android-Studio-和-SDK-的安装位置" class="headerlink" title="2.3.选择 Android Studio 和 SDK 的安装位置"></a>2.3.选择 Android Studio 和 SDK 的安装位置</h3><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240004.jpg" alt=""> </p>
<h3 id="2-4-开始安装"><a href="#2-4-开始安装" class="headerlink" title="2.4.开始安装"></a>2.4.开始安装</h3><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240005.jpg" alt=""></p>
<h3 id="2-5-安装完成"><a href="#2-5-安装完成" class="headerlink" title="2.5.安装完成"></a>2.5.安装完成</h3><p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240007.jpg" alt=""></p>
<h2 id="3-基本配置"><a href="#3-基本配置" class="headerlink" title="3.基本配置"></a>3.基本配置</h2><h3 id="3-1-设置-SDK-路径"><a href="#3-1-设置-SDK-路径" class="headerlink" title="3.1. 设置 SDK 路径"></a>3.1. 设置 SDK 路径</h3><p>打开 <strong>Android Studio</strong>，会弹出设置 <strong>SDK</strong> 路径的对话框。选择刚才安装的 <strong>SDK</strong> 路径。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240011.jpg" alt=""></p>
<p>如果没有弹出或者路径设置错误，也可以自己在【项目结构】里面自行设定和修改。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240012.jpg" alt=""></p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240014.jpg" alt=""></p>
<h3 id="3-2-新建项目"><a href="#3-2-新建项目" class="headerlink" title="3.2.新建项目"></a>3.2.新建项目</h3><p>【文件】→【新建】→【新项目】</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240015.jpg" alt=""></p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240016.jpg" alt=""></p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240017.jpg" alt=""></p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240018.jpg" alt=""></p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240019.jpg" alt=""></p>
<h3 id="3-3-配置-AVD"><a href="#3-3-配置-AVD" class="headerlink" title="3.3.配置 AVD"></a>3.3.配置 AVD</h3><p>运行项目，弹出建立安卓虚拟机对话框。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240020.jpg" alt=""></p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240021.jpg" alt=""></p>
<p>建立安卓虚拟机。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240022.jpg" alt=""></p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240023.jpg" alt=""></p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240024.jpg" alt=""></p>
<p>用新建的安卓虚拟机运行程序。</p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240025.jpg" alt=""></p>
<p><img src="https://raw.githubusercontent.com/JackSmithThu/MarkdownPhotos/master/201709240026.jpg" alt=""></p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <nav id="page-nav">
        <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/">下一页 &raquo;</a>
      </nav>
    </section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Jack Smith&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>
    

<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
  </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>